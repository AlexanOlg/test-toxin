
//-mixin dropdown(text, placeholder)
//-	.dropdown
//-		label.dropdown__label= text
//-			.dropdown__item
//-				input.dropdown__item-input(type='text' readonly placeholder= placeholder)
//-				span.dropdown__item-icon expand_more
include ../button/button.pug


mixin dropdown(type='room', isExpanded=false, isControls=false, vals=[0,0,0])
    -let maxNum=7; //-максимальное значение параметра
    -let minNum=0; //-минимальное значение параметра
    -let names, ids; //- дата-атрибуты
    -isExist
    -ddClass
    -ddMenuClass
    //-Добавляет класс, если dropdown должен быть раскрыт по умолчанию
    if isExpanded
        -ddMenuClass='dropdown__menu dropdown__menu_showed'
        -ddClass='dropdown dropdown_expanded'
    else
        -ddMenuClass='dropdown__menu'
        -ddClass='dropdown'
    //-Определение модификатора type, параметров внутри dropdown
    if type=='room'
        - names=['спальни', 'кровати', 'ванные комнаты']
        - ids = ['bedroom', 'bed', 'bathroom']
        -isExist=true
    else if type=='guest'
        - names=['взрослые', 'дети', 'младенцы']
        - ids = ['notbaby', 'notbaby', 'baby']
        -isExist=true

    div(class=ddClass)
        .dropdown__text Сколько гостей
        div(class=ddMenuClass)
            if isExist
            -let i=0
            each name in names
                if vals[i]==underfined||vals[i]<0
                    -vals[i]=minNum
                else if vals[i]>maxNum
                    -vals[i]=maxNum
                .dropdown__item(data-item=ids[i] data-type=type)
                    span.dropdown__name=name
                    span.dropdown__controls
                        if vals[i]==minVal
                            button.dropdown__button#button-minus(disabled) -
                        else
                            button.dropdown__button#button-minus - 
                        span.dropdown__quantity=vals[i]
                        if vals[i]==maxVal
                            button.dropdown__button#button-plus(disabled) +
                        else
                            button.dropdown__button#button-plus +
                -i++
            if isControls
                .dropdown__buttons
                    .dropdown__clear
                        +button-empty('очистить')
                    .dropdown__apply
                        +button-empty('применить')